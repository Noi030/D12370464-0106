<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>åœ–ç‰‡ç­Šæ¯æ“²ç­Š</title>
<style>
body {
    font-family: "å¾®è»Ÿæ­£é»‘é«”", Arial, sans-serif;
    text-align: center;
    margin-top: 50px;
    background-color: #fffbe6;
    overflow: hidden;
}
button {
    padding: 10px 20px;
    font-size: 18px;
    cursor: pointer;
    background-color: #d63447;
    color: white;
    border: none;
    border-radius: 5px;
}
#cups {
    position: relative;
    width: 100%;
    height: 300px;
    margin-top: 30px;
    perspective: 800px;
}
.cup {
    width: 60px;
    height: 40px;
    position: absolute;
    top: 0;
    left: 50%;
    transform-origin: bottom center;
    transform-style: preserve-3d;
    transition: transform 1s ease-in-out, top 1s ease-in-out, left 1s ease-in-out;
    backface-visibility: hidden;
}
.cup img {
    width: 100%;
    height: 100%;
    display: block;
}
</style>
</head>
<body>
<h1>åœ–ç‰‡ç­Šæ¯æ“²ç­Š</h1>
<button onclick="tossCup()">æ“²ç­Š</button>

<div id="cups">
    <div class="cup" id="cup1"><img src="cup-front.png" alt="ç­Šæ¯"></div>
    <div class="cup" id="cup2"><img src="cup-front.png" alt="ç­Šæ¯"></div>
</div>

<div id="result"></div>

<script>
function tossCup() {
    const cup1 = document.getElementById("cup1");
    const cup2 = document.getElementById("cup2");
    const resultDiv = document.getElementById("result");
    resultDiv.textContent = "";

    const cupAreaWidth = window.innerWidth - 80;
    const cupAreaHeight = 250;

    // éš¨æ©Ÿè½é»
    const pos1 = {x: Math.random() * cupAreaWidth, y: Math.random() * cupAreaHeight};
    const pos2 = {x: Math.random() * cupAreaWidth, y: Math.random() * cupAreaHeight};

    // éš¨æ©Ÿç¿»è½‰åœˆæ•¸
    const flips1 = 1 + Math.floor(Math.random() * 3);
    const flips2 = 1 + Math.floor(Math.random() * 3);

    // æ­£åé¢éš¨æ©Ÿï¼ˆ0 = æ­£é¢ç¬‘ç­Š, 1 = èƒŒé¢è–ç­Šï¼‰
    const face1 = Math.random() < 0.5 ? 0 : 1;
    const face2 = Math.random() < 0.5 ? 0 : 1;

    // è¨­å®šåˆå§‹åœ–ç‰‡
    cup1.innerHTML = `<img src="${face1 === 0 ? 'cup-front.png' : 'cup-back.png'}" alt="ç­Šæ¯">`;
    cup2.innerHTML = `<img src="${face2 === 0 ? 'cup-front.png' : 'cup-back.png'}" alt="ç­Šæ¯">`;

    // ç¿»è½‰å‹•ç•«
    cup1.style.transition = 'transform 1s ease-in-out, top 1s ease-in-out, left 1s ease-in-out';
    cup2.style.transition = 'transform 1s ease-in-out, top 1s ease-in-out, left 1s ease-in-out';
    cup1.style.top = pos1.y + "px";
    cup1.style.left = pos1.x + "px";
    cup1.style.transform = `rotateX(${360 * flips1 + face1*180}deg) rotateZ(${Math.random()*60-30}deg)`;
    cup2.style.top = pos2.y + "px";
    cup2.style.left = pos2.x + "px";
    cup2.style.transform = `rotateX(${360 * flips2 + face2*180}deg) rotateZ(${Math.random()*60-30}deg)`;

    // è½åœ°æ™ƒå‹•
    setTimeout(() => {
        cup1.style.transition = 'transform 0.3s ease';
        cup2.style.transition = 'transform 0.3s ease';
        const z1 = Math.random()*10 - 5;
        const z2 = Math.random()*10 - 5;
        cup1.style.transform = `rotateX(${face1*180}deg) rotateZ(${z1}deg)`;
        cup2.style.transform = `rotateX(${face2*180}deg) rotateZ(${z2}deg)`;

        setTimeout(() => {
            cup1.style.transform = `rotateX(${face1*180}deg) rotateZ(${-z1/2}deg)`;
            cup2.style.transform = `rotateX(${face2*180}deg) rotateZ(${-z2/2}deg)`;

            setTimeout(() => {
                cup1.style.transform = `rotateX(${face1*180}deg) rotateZ(0deg)`;
                cup2.style.transform = `rotateX(${face2*180}deg) rotateZ(0deg)`;
            }, 150);
        }, 150);

        // è¨ˆç®—çµæœ
        let finalResult;
        if(face1 === 1 && face2 === 1) finalResult = "è–ç­Š ğŸ™";
        else if(face1 === 0 && face2 === 0) finalResult = "é™°ç­Š âŒ";
        else finalResult = "ç¬‘ç­Š ğŸ¤”";

        resultDiv.textContent = finalResult;
    }, 1000);
}
</script>
</body>
</html>
